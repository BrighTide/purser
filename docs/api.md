# API

This docs serve to outline the API format and methods provided by `colony-wallet`.

#### Console output

In `development` mode there will be a number of warnings or errors outputted verbosely to the console.

When building with `NODE_ENV=production` all output will be silenced.

## Contents

* [Providers](#Providers)
  * [`metamask`](#metamask)
  * [`etherscan`](#etherscan)
  * [`infura`](#infura)
  * [`localhost`](#localhost)

## Providers

Create a connection to an Ethereum blockchain. This is achieved differently by the various providers.

HTTP API endpoint for _etherscan_ and _infura_, injected into the webpage in the case of _metamask_, or local RPC connection in the case of _localhost_.

### `metamask`

```js
metamask([network: string])
```

This provider method takes just an optional `network` name as string _(defaults to 'homestead')_ and will use the in-page `Web3` provider injected by the [Metamask extension](https://github.com/MetaMask/metamask-extension), if available.

```js
import { metamask } from 'colony-wallet/providers';

const provider = metamask('homestead'); // { chainId: '', ensAddress: '', ... }

// Or just use the defaults if you just want to go on mainnet.
const providerDefaults = metamask();
```

### `etherscan`

```js
etherscan([network: string], [token: string])
```

This provider method takes an optional `network` name as string _(defaults to 'homestead')_ and an optional, but very recommended `token` -- without it the connection will still work but will be very limited. A new token for the Etherscan API can be generated [here](https://etherscan.io/myapikey).

```js
import { etherscan } from 'colony-wallet/providers';

const provider = etherscan('homestead', '<your-token-key>'); // { chainId: '', ensAddress: '', ... }

```

### `infura`

```js
infura([network: string], [token: string])
```

This provider method takes an optional `network` name as string _(defaults to 'homestead')_ and an optional, but very recommended `token` -- without it the connection will still work but will be very limited. A new token for the Infura API can be generated by [signing up for the service](https://infura.io/signup).

```js
import { infura } from 'colony-wallet/providers';

const provider = infura('homestead', '<your-token-key>'); // { chainId: '', ensAddress: '', ... }
```

### `localhost`

```js
localhost([url: string], [network: string])
```

This provider method takes an optional `url` as string _(defaults to 'http://localhost:8545')_ and an optional `network` name as string _(defaults to 'homestead')_.

As opposed to the previous methods, this will just instantiate the provider but not actually connect to your local [`JSON-RPC`](http://www.jsonrpc.org/specification) server. It will only do that once you try sending a transaction. This also means that calling this method will never result in an error state, as any `url` string you provide will be initially instantiated -- when you try to communicate with it, than it will fail.

**Note:**

Most blockchain clients _(Parity, Geth)_ will restrict `JSON-RPC` connections by default via the `Access-Control-Allow-Origin` request header, or in the case of _Geth_, won't even start it by default.

To be able to connect to them locally you'll have to add `--rpccorsdomain "<your-domain>"` _(in the case of Parity)_ or `--jsonrpc-cors "<your-domain>"` _(in the case of Geth)_ to your startup command. You can also use `*` as the domain name for both of them _(allowing connections from all domains)_ but that is less secure.

```js
import { localhost } from 'colony-wallet/providers';

const provider = localhost('http://localhost:8545', 'homestead'); // { chainId: '', ensAddress: '', ... }
```
